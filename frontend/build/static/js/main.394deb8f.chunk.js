(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{120:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(25),c=r.n(a),s=(r(90),r(91),r(13)),i=r(8),d=r(125),o=r(131),l=r(133),j=r(129),u=r(33),b=r(10),O=r(7),p=r(12),h=r(22),x=r.n(h),g=r(18),m=Object(g.b)({name:"createOrder",initialState:{order:{},loading:"idle",error:null,success:!1},reducers:{createOrderRequest:function(e){"idle"===e.loading&&(e.loading="pending")},createOrderSuccess:function(e,t){"pending"===e.loading&&(e.loading="idle"),e.order=t.payload,e.error=null,e.success=!0},createOrderFail:function(e,t){"pending"===e.loading&&(e.loading="idle"),e.error=t.payload,e.success=!1},createOrderReset:function(e){"pending"===e.loading&&(e.loading="idle"),e.error=null,e.updated=!1,e.order={},e.success=!1}}}),f=m.reducer,v=m.actions,y=v.createOrderRequest,S=v.createOrderSuccess,I=v.createOrderFail,C=v.createOrderReset,w=Object(g.b)({name:"orderDetails",initialState:{order:[],loading:"pending",error:null},reducers:{orderDetailsRequest:function(e){"idle"===e.loading&&(e.loading="pending")},orderDetailsSuccess:function(e,t){"pending"===e.loading&&(e.loading="idle"),e.order=t.payload,e.error=null},orderDetailsFail:function(e,t){"pending"===e.loading&&(e.loading="idle"),e.error=t.payload}}}),k=w.reducer,L=w.actions,P=L.orderDetailsRequest,N=L.orderDetailsSuccess,R=L.orderDetailsFail,A=Object(g.b)({name:"orderPay",initialState:{loading:"idle",error:null,success:!1},reducers:{orderPayRequest:function(e){"idle"===e.loading&&(e.loading="pending")},orderPaySuccess:function(e){"pending"===e.loading&&(e.loading="idle"),e.success=!0,e.error=null},orderPayFail:function(e,t){"pending"===e.loading&&(e.loading="idle"),e.error=t.payload},orderPayReset:function(e){"pending"===e.loading&&(e.loading="idle"),e.error=null,e.success=!1}}}),F=A.reducer,D=A.actions,U=D.orderPayRequest,q=D.orderPaySuccess,E=D.orderPayFail,T=D.orderPayReset,G=Object(g.b)({name:"orderListUser",initialState:{loading:"idle",error:null,orders:[]},reducers:{orderListUserRequest:function(e){"idle"===e.loading&&(e.loading="pending")},orderListUserSuccess:function(e,t){"pending"===e.loading&&(e.loading="idle"),e.orders=t.payload,e.error=null},orderListUserFail:function(e,t){"pending"===e.loading&&(e.loading="idle"),e.error=t.payload},orderListUserReset:function(e){"pending"===e.loading&&(e.loading="idle"),e.error=null,e.orders=[]}}}),B=G.reducer,M=G.actions,$=M.orderListUserRequest,z=M.orderListUserSuccess,J=M.orderListUserFail,_=M.orderListUserReset,Y=Object(g.b)({name:"userSignup",initialState:{user:null,loading:"idle",error:null},reducers:{signupUserRequest:function(e){"idle"===e.loading&&(e.loading="pending")},signupUserSuccess:function(e,t){"pending"===e.loading&&(e.loading="idle"),e.user=t.payload,e.error=null},signupUserFail:function(e,t){"pending"===e.loading&&(e.loading="idle"),e.error=t.payload}}}),H=Y.reducer,Q=Y.actions,V=Q.signupUserRequest,W=Q.signupUserSuccess,K=Q.signupUserFail,X=Object(g.b)({name:"userLogin",initialState:{user:null,loading:"idle",error:null},reducers:{loginUserRequest:function(e){"idle"===e.loading&&(e.loading="pending")},loginUserSuccess:function(e,t){"pending"===e.loading&&(e.loading="idle"),e.user=t.payload,e.error=null},loginUserFail:function(e,t){"pending"===e.loading&&(e.loading="idle"),e.error=t.payload},logoutUserRequest:function(e){e.user=null,e.loading="idle",e.error=null}}}),Z=X.reducer,ee=X.actions,te=ee.loginUserRequest,re=ee.loginUserSuccess,ne=ee.loginUserFail,ae=ee.logoutUserRequest,ce=Object(g.b)({name:"userDetails",initialState:{user:{},loading:"idle",error:null},reducers:{userDetailsRequest:function(e){"idle"===e.loading&&(e.loading="pending")},userDetailsSuccess:function(e,t){"pending"===e.loading&&(e.loading="idle"),e.user=t.payload,e.error=null},userDetailsFail:function(e,t){"pending"===e.loading&&(e.loading="idle"),e.error=t.payload},userDetailsReset:function(e){"pending"===e.loading&&(e.loading="idle"),e.error=null,e.user={}}}}),se=ce.reducer,ie=ce.actions,de=ie.userDetailsRequest,oe=ie.userDetailsSuccess,le=ie.userDetailsFail,je=ie.userDetailsReset,ue=Object(g.b)({name:"userUpdate",initialState:{user:{},loading:"idle",error:null,updated:!1},reducers:{userUpdateRequest:function(e){"idle"===e.loading&&(e.loading="pending")},userUpdateSuccess:function(e,t){"pending"===e.loading&&(e.loading="idle"),e.user=t.payload,e.updated=!0,e.error=null},userUpdateFail:function(e,t){"pending"===e.loading&&(e.loading="idle"),e.error=t.payload},userUpdateReset:function(e){"pending"===e.loading&&(e.loading="idle"),e.error=null,e.updated=!1,e.user={}}}}),be=ue.reducer,Oe=ue.actions,pe=Oe.userUpdateRequest,he=Oe.userUpdateSuccess,xe=Oe.userUpdateFail,ge=Oe.userUpdateReset,me=r(1),fe=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.userLogin})).user;return Object(n.useEffect)((function(){}),[t]),Object(me.jsx)("header",{children:Object(me.jsx)(o.a,{bg:"primary",variant:"dark",expand:"lg",collapseOnSelect:!0,children:Object(me.jsxs)(d.a,{children:[Object(me.jsx)(u.LinkContainer,{to:"/",children:Object(me.jsx)(o.a.Brand,{children:"Shopbite"})}),Object(me.jsx)(o.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(me.jsx)(o.a.Collapse,{id:"basic-navbar-nav",children:Object(me.jsxs)(l.a,{className:"ml-auto my-1",children:[Object(me.jsx)(u.LinkContainer,{to:"/cart",children:Object(me.jsxs)(l.a.Link,{children:[Object(me.jsx)("i",{className:"fas fa-shopping-cart"})," CART"]})}),t?Object(me.jsxs)(j.a,{title:t.name,id:"username",children:[Object(me.jsx)(u.LinkContainer,{to:"/profile",children:Object(me.jsx)(j.a.Item,{children:"PROFILE"})}),Object(me.jsx)(j.a.Item,{onClick:function(){e(function(){var e=Object(p.a)(Object(O.a)().mark((function e(t){return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("userInfo"),t(ae()),t(_()),t(je());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"LOGOUT"})]}):Object(me.jsx)(u.LinkContainer,{to:"/login",children:Object(me.jsxs)(l.a.Link,{children:[Object(me.jsx)("i",{className:"fas fa-user"})," LOG IN"]})})]})})]})})})},ve=r(126),ye=r(85),Se=function(){return Object(me.jsx)("footer",{children:Object(me.jsx)(d.a,{children:Object(me.jsx)(ve.a,{children:Object(me.jsxs)(ye.a,{className:"text-center py-3",children:["\xa9 2023 Copyright: Shopbite"," "]})})})})},Ie=r(134),Ce=function(e){var t=e.rating,r=e.numOfReviews,n=e.color;return Object(me.jsxs)("div",{className:"rating",children:[Object(me.jsx)("span",{children:Object(me.jsx)("i",{style:{color:n},className:t>=1?"fas fa-star":t>=.5?"fas fa-star-half-alt":"far fa-star"})}),Object(me.jsx)("span",{children:Object(me.jsx)("i",{style:{color:n},className:t>=2?"fas fa-star":t>=1.5?"fas fa-star-half-alt":"far fa-star"})}),Object(me.jsx)("span",{children:Object(me.jsx)("i",{style:{color:n},className:t>=3?"fas fa-star":t>=2.5?"fas fa-star-half-alt":"far fa-star"})}),Object(me.jsx)("span",{children:Object(me.jsx)("i",{style:{color:n},className:t>=4?"fas fa-star":t>=3.5?"fas fa-star-half-alt":"far fa-star"})}),Object(me.jsx)("span",{children:Object(me.jsx)("i",{style:{color:n},className:t>=5?"fas fa-star":t>=4.5?"fas fa-star-half-alt":"far fa-star"})}),Object(me.jsx)("br",{}),Object(me.jsx)("span",{children:r})]})};Ce.defaultProps={color:"#FDCC0D"};var we=Ce,ke=function(e){var t=e.product;return Object(me.jsxs)(Ie.a,{className:"my-3 p-3 rounded",children:[Object(me.jsx)(s.Link,{to:"/product/".concat(t._id),children:Object(me.jsx)(Ie.a.Img,{src:t.image,variant:"top"})}),Object(me.jsxs)(Ie.a.Body,{children:[Object(me.jsx)(s.Link,{to:"/product/".concat(t._id),children:Object(me.jsx)(Ie.a.Title,{children:Object(me.jsx)("strong",{children:t.name})})}),Object(me.jsx)(Ie.a.Text,{as:"div",children:Object(me.jsx)(we,{rating:t.rating,numOfReviews:"".concat(t.numReviews," reviews")})}),Object(me.jsxs)(Ie.a.Text,{as:"h3",children:["$",t.price]})]})]})},Le=r(132),Pe=function(e){var t=e.variant,r=e.children;return Object(me.jsx)(Le.a,{variant:t,children:r})};Pe.defaultProps={variant:"info"};var Ne=Pe,Re=function(){return Object(me.jsx)("img",{style:{width:"150px",height:"150px",margin:"60px auto",display:"block"},alt:"Loading",src:"/images/Spinner.gif"})},Ae=Object(g.b)({name:"productList",initialState:{products:[],loading:"idle",error:null},reducers:{productListFetch:function(e,t){"idle"===e.loading&&(e.loading="pending")},productListSuccess:function(e,t){"pending"===e.loading&&(e.loading="idle"),e.products=t.payload.products,e.totalPages=t.payload.totalPages,e.page=t.payload.page,e.error=null},productListFail:function(e,t){"pending"===e.loading&&(e.loading="idle"),e.error=t.payload}}}),Fe=Ae.actions,De=Fe.productListFetch,Ue=Fe.productListSuccess,qe=Fe.productListFail,Ee=Ae.reducer,Te=Object(g.b)({name:"addReview",initialState:{loading:"idle",error:null,success:!1},reducers:{addReviewFetch:function(e){"idle"===e.loading&&(e.loading="pending")},addReviewSuccess:function(e){"pending"===e.loading&&(e.loading="idle"),e.success=!0,e.error=null},addReviewFail:function(e,t){"pending"===e.loading&&(e.loading="idle"),e.error=t.payload},addReviewReset:function(e,t){"pending"===e.loading&&(e.loading="idle"),e.error=null,e.success=!1}}}),Ge=Te.actions,Be=Ge.addReviewFetch,Me=Ge.addReviewSuccess,$e=Ge.addReviewFail,ze=Ge.addReviewReset,Je=Te.reducer,_e=Object(g.b)({name:"productList",initialState:{product:{reviews:[]},loading:"idle",error:null},reducers:{productDetailsFetch:function(e){"idle"===e.loading&&(e.loading="pending")},productDetailsSuccess:function(e,t){"pending"===e.loading&&(e.loading="idle"),e.product=t.payload,e.error=null},productDetailsFail:function(e,t){"pending"===e.loading&&(e.loading="idle"),e.error=t.payload}}}),Ye=_e.actions,He=Ye.productDetailsFetch,Qe=Ye.productDetailsSuccess,Ve=Ye.productDetailsFail,We=_e.reducer,Ke=r(9),Xe=r(130),Ze=r(84),et=function(){var e=Object(n.useState)(""),t=Object(Ke.a)(e,2),r=t[0],a=t[1],c=Object(i.B)();return Object(me.jsxs)(Xe.a,{onSubmit:function(e){e.preventDefault(),r.trim()?c("/search/".concat(r)):c("/")},inline:!0,className:"mb-2",children:[Object(me.jsx)(Xe.a.Control,{type:"text",name:"query",onChange:function(e){return a(e.target.value)},placeholder:"Search a Product",className:"mr-sm-2 ml-sm-6 py-3"}),Object(me.jsx)(Ze.a,{type:"submit",variant:"outline-success",className:"py-1",children:"Search"})]})},tt=r(19),rt=r(135),nt=function(e){var t=e.totalPages,r=e.page,n=e.query,a=void 0===n?"":n;return t>1&&Object(me.jsx)(rt.a,{children:Object(tt.a)(Array(t).keys()).map((function(e){return Object(me.jsx)(u.LinkContainer,{to:a?"/search/".concat(a,"/page/").concat(e+1):"/page/".concat(e+1),children:Object(me.jsx)(rt.a.Item,{active:e+1===r,children:e+1})},e+1)}))})},at=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.productList})),r=t.loading,a=t.error,c=t.products,s=t.totalPages,d=t.page,o=Object(i.G)().pageNum||1,l=Object(i.G)().query;return Object(n.useEffect)((function(){e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(){var r=Object(p.a)(Object(O.a)().mark((function r(n){var a,c;return Object(O.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n(De()),r.next=4,x.a.get("/api/products?product=".concat(e,"&pageNum=").concat(t));case 4:a=r.sent,c=a.data,n(Ue(c)),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),n(qe(r.t0.message));case 12:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(e){return r.apply(this,arguments)}}()}(l,o))}),[e,l,o]),Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)("h1",{children:"Featured Items"}),Object(me.jsx)(et,{}),"pending"===r?Object(me.jsx)(Re,{}):a?Object(me.jsx)(Ne,{variant:"danger",children:a}):Object(me.jsx)(ve.a,{children:null===c||void 0===c?void 0:c.map((function(e){return Object(me.jsx)(ye.a,{m:12,md:6,lg:4,xl:3,children:Object(me.jsx)(ke,{product:e})},e._id)}))}),Object(me.jsx)(nt,{totalPages:s,page:d,query:l||""})]})},ct=r(136),st=r(127),it=Object(g.b)({name:"cart",initialState:{itemsInCart:[],shippingAddress:{},paymentMethod:""},reducers:{addItemToCart:function(e,t){var r=t.payload;e.itemsInCart.find((function(e){return e.product===r.product}))?e.itemsInCart=e.itemsInCart.map((function(e){return e.product===r.product?r:e})):e.itemsInCart.push(r)},removeItemFromCart:function(e,t){e.itemsInCart=e.itemsInCart.filter((function(e){return e.product!==t.payload}))},addShippingAddress:function(e,t){e.shippingAddress=t.payload},addPaymentMethod:function(e,t){e.paymentMethod=t.payload},cartReset:function(e){e.itemsInCart=[]}}}),dt=it.actions,ot=dt.addItemToCart,lt=dt.removeItemFromCart,jt=dt.addShippingAddress,ut=dt.addPaymentMethod,bt=dt.cartReset,Ot=it.reducer,pt=function(e,t){return function(){var r=Object(p.a)(Object(O.a)().mark((function r(n,a){var c,s;return Object(O.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,x.a.get("/api/products/".concat(e,"/"));case 2:c=r.sent,s=c.data,n(ot({product:s._id,price:s.price,image:s.image,name:s.name,stock:s.numInStock,quantity:t})),localStorage.setItem("itemsInCart",JSON.stringify(a().cart.itemsInCart));case 6:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()},ht=function(){var e=Object(s.useSearchParams)(),t=Object(Ke.a)(e,1)[0],r=t.get("qty")?t.get("qty"):1,a=Object(i.B)(),c=Object(i.G)().id,d=Object(b.b)(),o=Object(b.c)((function(e){return e.cart})).itemsInCart;Object(n.useEffect)((function(){c&&d(pt(c,r))}),[d,c,r]);var l=function(e){d(function(e){return function(){var t=Object(p.a)(Object(O.a)().mark((function t(r,n){return Object(O.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r(lt(e)),localStorage.setItem("itemsInCart",JSON.stringify(n().cart.itemsInCart));case 2:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}(e))};return Object(me.jsxs)(ve.a,{children:[Object(me.jsxs)(ye.a,{md:8,children:[Object(me.jsx)("h1",{children:"Shopping Cart"}),0===o.length?Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(Ne,{children:"There is no item in your cart"}),Object(me.jsx)(Ne,{children:Object(me.jsx)(s.Link,{to:"/",children:"Go Back to Home Page"})})]}):Object(me.jsx)(ct.a,{variant:"flush",children:o.map((function(e){return Object(me.jsx)(ct.a.Item,{children:Object(me.jsxs)(ve.a,{children:[Object(me.jsx)(ye.a,{md:2,children:Object(me.jsx)(st.a,{src:e.image,alt:e.name,fluid:!0,rounded:!0})}),Object(me.jsx)(ye.a,{md:3,children:Object(me.jsx)(s.Link,{to:"/product/".concat(e.product),children:e.name})}),Object(me.jsxs)(ye.a,{md:2,children:["$",e.price]}),Object(me.jsx)(ye.a,{md:2,children:Object(me.jsx)(Xe.a.Control,{as:"select",value:e.quantity,onChange:function(t){return d(pt(e.product,Number(t.target.value)))},children:Object(tt.a)(Array(e.stock).keys()).map((function(e){return Object(me.jsx)("option",{value:e+1,children:e+1},e+1)}))})}),Object(me.jsx)(ye.a,{md:2,children:Object(me.jsx)(Ze.a,{type:"button",variant:"light",onClick:function(){return l(e.product)},children:Object(me.jsx)("i",{className:"fas fa-trash"})})})]})},e.product)}))})]}),Object(me.jsx)(ye.a,{md:4,children:Object(me.jsx)(Ie.a,{children:Object(me.jsxs)(ct.a,{variant:"flush",children:[Object(me.jsxs)(ct.a.Item,{children:[Object(me.jsx)("h2",{children:"Subtotal"}),Object(me.jsxs)("p",{children:["Number of Items:"," ",o.reduce((function(e,t){return e+Number(t.quantity)}),0)]}),Object(me.jsxs)("p",{children:["$",o.reduce((function(e,t){return e+t.quantity*t.price}),0).toFixed(2)]})]}),Object(me.jsx)(ct.a.Item,{children:Object(me.jsx)(Ze.a,{type:"button",className:"btn-block",disabled:0===o.length,onClick:function(){a("/shipping")},children:"Proceed To Checkout"})})]})})})]})},xt=function(){var e=Object(n.useState)(1),t=Object(Ke.a)(e,2),r=t[0],a=t[1],c=Object(n.useState)(0),d=Object(Ke.a)(c,2),o=d[0],l=d[1],j=Object(n.useState)(""),u=Object(Ke.a)(j,2),h=u[0],g=u[1],m=Object(i.G)().id,f=Object(i.B)(),v=Object(b.b)(),y=Object(b.c)((function(e){return e.productDetails})),S=y.product,I=y.loading,C=y.error,w=Object(b.c)((function(e){return e.addReview})),k=w.success,L=w.loading,P=w.error,N=Object(b.c)((function(e){return e.userLogin})).user;Object(n.useEffect)((function(){k&&(l(0),g("")),v(function(e){return function(){var t=Object(p.a)(Object(O.a)().mark((function t(r){var n,a;return Object(O.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(He()),t.next=4,x.a.get("/api/products/".concat(e));case 4:n=t.sent,a=n.data,r(Qe(a)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),r(Ve(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(m)),S._id||v(ze())}),[S._id,v,m,k]);return Object(me.jsxs)("div",{children:[Object(me.jsx)(s.Link,{className:"btn btn-light my-3",to:"/",children:"Go Back"}),"pending"===I?Object(me.jsx)(Re,{}):C?Object(me.jsx)(Ne,{variant:"danger",children:C}):Object(me.jsxs)(me.Fragment,{children:[Object(me.jsxs)(ve.a,{children:[Object(me.jsx)(ye.a,{md:6,children:Object(me.jsx)(st.a,{src:S.image,alt:S.name,className:"rounded",fluid:!0})}),Object(me.jsxs)(ye.a,{md:3,children:[Object(me.jsx)(ct.a,{variant:"flush",children:Object(me.jsx)(ct.a.Item,{children:Object(me.jsx)("h3",{children:S.name})})}),Object(me.jsxs)(ct.a,{variant:"flush",children:[Object(me.jsx)(ct.a.Item,{children:Object(me.jsx)(we,{rating:S.rating,numOfReviews:"".concat(S.numReviews," reviews")})}),Object(me.jsxs)(ct.a.Item,{children:["Price: ",S.price]}),Object(me.jsxs)(ct.a.Item,{children:["Description: ",Object(me.jsx)("br",{})," ",S.description]})]})]}),Object(me.jsx)(ye.a,{md:3,children:Object(me.jsx)(Ie.a,{children:Object(me.jsxs)(ct.a,{variant:"flush",children:[Object(me.jsx)(ct.a.Item,{children:Object(me.jsxs)(ve.a,{children:[Object(me.jsx)(ye.a,{children:"Price:"}),Object(me.jsx)(ye.a,{children:Object(me.jsxs)("strong",{children:["$",S.price]})})]})}),Object(me.jsx)(ct.a.Item,{children:Object(me.jsxs)(ve.a,{children:[Object(me.jsx)(ye.a,{children:"Status:"}),Object(me.jsx)(ye.a,{children:Object(me.jsx)("strong",{children:S.numInStock>0?"In Stock":"Out of Stock"})})]})}),S.numInStock>0&&Object(me.jsx)(ct.a.Item,{children:Object(me.jsxs)(ve.a,{children:[Object(me.jsx)(ye.a,{children:"Quantity:"}),Object(me.jsx)(ye.a,{children:Object(me.jsx)(Xe.a.Control,{as:"select",value:r,onChange:function(e){return a(e.target.value)},children:Object(tt.a)(Array(S.numInStock).keys()).map((function(e){return Object(me.jsx)("option",{value:e+1,children:e+1},e+1)}))})})]})}),Object(me.jsx)(ct.a.Item,{children:Object(me.jsx)(Ze.a,{onClick:function(){f("/cart/".concat(m,"?qty=").concat(r))},className:"primary btn-block",type:"button",disabled:S.numInStock<=0,children:"ADD TO CART"})})]})})})]}),Object(me.jsx)(ve.a,{children:Object(me.jsxs)(ye.a,{md:6,children:[Object(me.jsx)("h2",{children:"Reviews"}),0===S.reviews.length&&Object(me.jsx)(Ne,{children:"No Reviews for this product"}),Object(me.jsxs)(ct.a,{variant:"flush",children:[S.reviews.map((function(e){return Object(me.jsxs)(ct.a.Item,{children:[Object(me.jsx)("strong",{children:e.name}),Object(me.jsx)(we,{rating:e.rating,umOfReviews:"".concat(S.numReviews)}),Object(me.jsx)("p",{children:e.createdAt.substring(0,10)}),Object(me.jsx)("p",{children:e.comment})]},e._id)})),Object(me.jsxs)(ct.a.Item,{children:[Object(me.jsx)("h2",{children:"Write a Review:"}),k&&Object(me.jsx)(Ne,{variant:"success",children:"Your Review has been submitted!"}),"pending"===L?Object(me.jsx)(Re,{}):P&&Object(me.jsx)(Ne,{variant:"danger",children:P}),N?Object(me.jsxs)(Xe.a,{onSubmit:function(e){var t,r;e.preventDefault(),v((t=m,r={rating:o,comment:h},function(){var e=Object(p.a)(Object(O.a)().mark((function e(n,a){var c,s,i,d;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(Be()),c=a(),s=c.userLogin.user,i={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)}},e.next=6,x.a.post("/api/products/".concat(t,"/reviews"),r,i);case 6:n(Me()),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),"Not authorized"===(d=e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message)&&n(ae()),n($e(d));case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r){return e.apply(this,arguments)}}()))},children:[Object(me.jsxs)(Xe.a.Group,{controlId:"rating",children:[Object(me.jsx)(Xe.a.Label,{children:"Rating"}),Object(me.jsxs)(Xe.a.Control,{as:"select",value:o,onChange:function(e){return l(e.target.value)},children:[Object(me.jsx)("option",{value:"",children:"Select an option"}),Object(me.jsx)("option",{value:"1",children:"1 star - Poor"}),Object(me.jsx)("option",{value:"2",children:"2 stars - Fair"}),Object(me.jsx)("option",{value:"3",children:"3 stars - Good"}),Object(me.jsx)("option",{value:"4",children:"4 stars - Very Good"}),Object(me.jsx)("option",{value:"5",children:"5 stars - Excellent"})]})]}),Object(me.jsxs)(Xe.a.Group,{controlId:"comment",children:[Object(me.jsx)(Xe.a.Label,{children:"Leave a Comment:"}),Object(me.jsx)(Xe.a.Control,{as:"textarea",row:"3",value:h,onChange:function(e){return g(e.target.value)}})]}),Object(me.jsx)(Ze.a,{disabled:"pending"===L,type:"submit",variant:"primary",children:"Submit Review"})]}):Object(me.jsxs)(Ne,{children:["Please ",Object(me.jsx)(s.Link,{to:"/login",children:"login"})]})]})]})]})})]})]})},gt=function(e){var t=e.children;return Object(me.jsx)(d.a,{children:Object(me.jsx)(ve.a,{className:"justify-content-md-center",children:Object(me.jsx)(ye.a,{xs:12,md:6,children:t})})})},mt=function(){var e=Object(n.useState)(""),t=Object(Ke.a)(e,2),r=t[0],a=t[1],c=Object(n.useState)(""),d=Object(Ke.a)(c,2),o=d[0],l=d[1],j=Object(s.useSearchParams)(),u=Object(Ke.a)(j,1)[0],h=u.get("redirect")?u.get("redirect"):"/",g=Object(i.B)(),m=Object(b.c)((function(e){return e.userLogin})),f=m.loading,v=m.error,y=m.user,S=Object(b.b)();Object(n.useEffect)((function(){y&&g(h)}),[g,h,y]);return Object(me.jsxs)(gt,{children:[Object(me.jsx)("h1",{children:"Log In"}),v&&Object(me.jsx)(Ne,{variant:"danger",children:v}),"pending"===f?Object(me.jsx)(Re,{}):null,Object(me.jsxs)(Xe.a,{onSubmit:function(e){e.preventDefault(),S(function(e,t){return function(){var r=Object(p.a)(Object(O.a)().mark((function r(n){var a,c,s;return Object(O.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n(te()),a={headers:{"Content-Type":"application/json"}},r.next=5,x.a.post("/api/users/login",{email:e,password:t},a);case 5:c=r.sent,s=c.data,n(re(s)),localStorage.setItem("userInfo",JSON.stringify(s)),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),n(ne(r.t0.response&&r.t0.response.data.message?r.t0.response.data.message:r.t0.message));case 14:case"end":return r.stop()}}),r,null,[[0,11]])})));return function(e){return r.apply(this,arguments)}}()}(r,o))},children:[Object(me.jsxs)(Xe.a.Group,{controlId:"email",children:[Object(me.jsx)(Xe.a.Label,{children:"Email Address:"}),Object(me.jsx)(Xe.a.Control,{type:"email",placeholder:"Enter email address",value:r,onChange:function(e){return a(e.target.value)}})]}),Object(me.jsxs)(Xe.a.Group,{controlId:"password",children:[Object(me.jsx)(Xe.a.Label,{children:"Enter Password:"}),Object(me.jsx)(Xe.a.Control,{type:"password",placeholder:"Enter password",value:o,onChange:function(e){return l(e.target.value)}})]}),Object(me.jsx)(Ze.a,{type:"submit",variant:"primary",children:"Sign In"})]}),Object(me.jsx)(ve.a,{className:"py-3",children:Object(me.jsxs)(ye.a,{children:["Are You a New Customer?","  ",Object(me.jsx)(s.Link,{to:h?"/signup?redirect=".concat(h):"/signup",children:"Sign Up"})]})})]})},ft=function(){var e=Object(n.useState)(""),t=Object(Ke.a)(e,2),r=t[0],a=t[1],c=Object(n.useState)(""),d=Object(Ke.a)(c,2),o=d[0],l=d[1],j=Object(n.useState)(""),u=Object(Ke.a)(j,2),h=u[0],g=u[1],m=Object(n.useState)(""),f=Object(Ke.a)(m,2),v=f[0],y=f[1],S=Object(n.useState)(null),I=Object(Ke.a)(S,2),C=I[0],w=I[1],k=Object(b.b)(),L=Object(b.c)((function(e){return e.userSignup})),P=L.user,N=L.loading,R=L.error,A=Object(s.useSearchParams)(),F=Object(Ke.a)(A,1)[0],D=F.get("redirect")?F.get("redirect"):"/",U=Object(i.B)();Object(n.useEffect)((function(){P&&U(D)}),[U,D,P]);return Object(me.jsxs)(gt,{children:[Object(me.jsx)("h1",{children:"Sign Up"}),C&&Object(me.jsx)(Ne,{variant:"danger",children:C}),R&&Object(me.jsx)(Ne,{variant:"danger",children:R}),"pending"===N?Object(me.jsx)(Re,{}):null,Object(me.jsxs)(Xe.a,{onSubmit:function(e){e.preventDefault(),o!==h?w("Passwords do not match"):k(function(e,t,r){return function(){var n=Object(p.a)(Object(O.a)().mark((function n(a){var c,s,i;return Object(O.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a(V()),c={headers:{"Content-Type":"application/json"}},n.next=5,x.a.post("/api/users",{email:e,password:t,name:r},c);case 5:s=n.sent,i=s.data,a(W(i)),a(re(i)),localStorage.setItem("userInfo",JSON.stringify(i)),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),a(K(n.t0.response&&n.t0.response.data.message?n.t0.response.data.message:n.t0.message));case 15:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(e){return n.apply(this,arguments)}}()}(r,o,v))},children:[Object(me.jsxs)(Xe.a.Group,{controlId:"email",children:[Object(me.jsx)(Xe.a.Label,{children:"Email Address:"}),Object(me.jsx)(Xe.a.Control,{type:"email",placeholder:"Enter email address",value:r,onChange:function(e){return a(e.target.value)}})]}),Object(me.jsxs)(Xe.a.Group,{controlId:"password",children:[Object(me.jsx)(Xe.a.Label,{children:"Password:"}),Object(me.jsx)(Xe.a.Control,{type:"password",placeholder:"Enter password",value:o,onChange:function(e){return l(e.target.value)}})]}),Object(me.jsxs)(Xe.a.Group,{controlId:"confirmPassword",children:[Object(me.jsx)(Xe.a.Label,{children:"Confirm Password:"}),Object(me.jsx)(Xe.a.Control,{type:"password",placeholder:"Confirm password",value:h,onChange:function(e){return g(e.target.value)}})]}),Object(me.jsxs)(Xe.a.Group,{controlId:"name",children:[Object(me.jsx)(Xe.a.Label,{children:"Name:"}),Object(me.jsx)(Xe.a.Control,{type:"name",placeholder:"Enter your name",value:v,onChange:function(e){return y(e.target.value)}})]}),Object(me.jsx)(Ze.a,{type:"submit",variant:"primary",children:"Register"})]}),Object(me.jsx)(ve.a,{className:"py-3",children:Object(me.jsxs)(ye.a,{children:["Already Have an Account?","  ",Object(me.jsx)(s.Link,{to:D?"/login?redirect=".concat(D):"/login",children:"Login Here"})]})})]})},vt=r(128),yt=function(e){return function(){var t=Object(p.a)(Object(O.a)().mark((function t(r,n){var a,c,s,i,d,o;return Object(O.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(P()),a=n(),c=a.userLogin.user,s={headers:{Authorization:"Bearer ".concat(c.token)}},t.next=6,x.a.get("/api/orders/".concat(e),s);case 6:i=t.sent,d=i.data,r(N(d)),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(0),"Not authorized"===(o=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message)&&r(ae()),r(R(o));case 16:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,r){return t.apply(this,arguments)}}()},St=function(){var e=Object(n.useState)(""),t=Object(Ke.a)(e,2),r=t[0],a=t[1],c=Object(n.useState)(""),s=Object(Ke.a)(c,2),d=s[0],o=s[1],l=Object(n.useState)(""),j=Object(Ke.a)(l,2),h=j[0],g=j[1],m=Object(n.useState)(""),f=Object(Ke.a)(m,2),v=f[0],y=f[1],S=Object(n.useState)(null),I=Object(Ke.a)(S,2),C=I[0],w=I[1],k=Object(i.B)(),L=Object(b.b)(),P=Object(b.c)((function(e){return e.userDetails})),N=P.loading,R=P.error,A=P.user,F=Object(b.c)((function(e){return e.userLogin})).user,D=Object(b.c)((function(e){return e.userUpdate})).updated,U=Object(b.c)((function(e){return e.orderListUser})),q=U.loading,E=U.error,T=U.orders;Object(n.useEffect)((function(){var e;F?A&&A.name&&!D?(y(A.name),a(A.email),L(function(){var e=Object(p.a)(Object(O.a)().mark((function e(t,r){var n,a,c,s,i,d;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t($()),n=r(),a=n.userLogin.user,c={headers:{Authorization:"Bearer ".concat(a.token)}},e.next=6,x.a.get("/api/orders/myorders",c);case 6:s=e.sent,i=s.data,t(z(i)),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),"Not authorized"===(d=e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message)&&t(ae()),t(J(d));case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r){return e.apply(this,arguments)}}())):(L(ge()),L((e="profile",function(){var t=Object(p.a)(Object(O.a)().mark((function t(r,n){var a,c,s,i,d,o;return Object(O.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(de()),a=n(),c=a.userLogin.user,s={headers:{Authorization:"Bearer ".concat(c.token)}},t.next=6,x.a.get("/api/users/".concat(e),s);case 6:i=t.sent,d=i.data,r(oe(d)),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(0),"Not authorized"===(o=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message)&&r(ae()),r(le(o));case 16:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,r){return t.apply(this,arguments)}}()))):k("/login")}),[L,A,k,F,D]);return Object(me.jsxs)(ve.a,{children:[Object(me.jsxs)(ye.a,{md:3,children:[Object(me.jsx)("h2",{children:"User Profile"}),C&&Object(me.jsx)(Ne,{variant:"danger",children:C}),D&&Object(me.jsx)(Ne,{variant:"success",children:"Profile Updated"}),"pending"===N?Object(me.jsx)(Re,{}):R?Object(me.jsx)(Ne,{variant:"danger",children:R}):Object(me.jsxs)(Xe.a,{onSubmit:function(e){if(e.preventDefault(),d!==h)return w("Passwords do not match");var t;L((t={id:A._id,name:v,email:r,password:d},function(){var e=Object(p.a)(Object(O.a)().mark((function e(r,n){var a,c,s,i,d,o;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(pe()),a=n(),c=a.userLogin.user,s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},e.next=6,x.a.put("/api/users/profile",t,s);case 6:i=e.sent,d=i.data,r(he(d)),r(re(d)),localStorage.setItem("userInfo",JSON.stringify(d)),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(0),"Not authorized"===(o=e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message)&&r(ae()),r(xe(o));case 18:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r){return e.apply(this,arguments)}}()))},children:[Object(me.jsxs)(Xe.a.Group,{controlId:"name",children:[Object(me.jsx)(Xe.a.Label,{children:"Name:"}),Object(me.jsx)(Xe.a.Control,{type:"name",placeholder:"Enter name",value:v,onChange:function(e){return y(e.target.value)}})]}),Object(me.jsxs)(Xe.a.Group,{controlId:"email",children:[Object(me.jsx)(Xe.a.Label,{children:"Email Address:"}),Object(me.jsx)(Xe.a.Control,{type:"email",placeholder:"Enter email address",value:r,onChange:function(e){return a(e.target.value)}})]}),Object(me.jsxs)(Xe.a.Group,{controlId:"password",children:[Object(me.jsx)(Xe.a.Label,{children:"Password:"}),Object(me.jsx)(Xe.a.Control,{type:"password",placeholder:"Enter password",value:d,onChange:function(e){return o(e.target.value)}})]}),Object(me.jsxs)(Xe.a.Group,{controlId:"confirmPassword",children:[Object(me.jsx)(Xe.a.Label,{children:"Confirm Password:"}),Object(me.jsx)(Xe.a.Control,{type:"password",placeholder:"Confirm password",value:h,onChange:function(e){return g(e.target.value)}})]}),Object(me.jsx)(Ze.a,{type:"submit",variant:"primary",children:"Update Profile"})]})]}),Object(me.jsxs)(ye.a,{md:9,children:[Object(me.jsx)("h2",{children:"My Orders"}),"pending"===q?Object(me.jsx)(Re,{}):E?Object(me.jsx)(Ne,{variant:"danger",children:E}):Object(me.jsxs)(vt.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm",children:[Object(me.jsx)("thead",{children:Object(me.jsxs)("tr",{children:[Object(me.jsx)("th",{children:"ID"}),Object(me.jsx)("th",{children:"PLACED AT"}),Object(me.jsx)("th",{children:"TOTAL"}),Object(me.jsx)("th",{children:"PAYMENT STATUS"}),Object(me.jsx)("th",{})]})}),Object(me.jsx)("tbody",{children:T.map((function(e){return Object(me.jsxs)("tr",{children:[Object(me.jsx)("td",{children:e._id}),Object(me.jsx)("td",{children:e.createdAt.substring(0,10)}),Object(me.jsx)("td",{children:e.totalPrice}),Object(me.jsx)("td",{children:e.isPaid?Object(me.jsx)("i",{className:"fas fa-check",style:{color:"green"}}):Object(me.jsx)("i",{className:"fas fa-times",style:{color:"red"}})}),Object(me.jsx)("td",{children:Object(me.jsx)(u.LinkContainer,{to:"/order/".concat(e._id),children:Object(me.jsx)(Ze.a,{className:"btn-sm",variant:"light",children:"See Order Details"})})})]},e._id)}))})]})]})]})},It=function(){var e=Object(i.B)(),t=Object(b.b)(),r=Object(b.c)((function(e){return e.cart})).shippingAddress,a=Object(b.c)((function(e){return e.userLogin})).user,c=Object(n.useState)((null===r||void 0===r?void 0:r.address)||""),s=Object(Ke.a)(c,2),d=s[0],o=s[1],l=Object(n.useState)((null===r||void 0===r?void 0:r.postalCode)||""),j=Object(Ke.a)(l,2),u=j[0],O=j[1],p=Object(n.useState)((null===r||void 0===r?void 0:r.country)||""),h=Object(Ke.a)(p,2),x=h[0],g=h[1],m=Object(n.useState)((null===r||void 0===r?void 0:r.city)||""),f=Object(Ke.a)(m,2),v=f[0],y=f[1];Object(n.useEffect)((function(){a||e("/login")}),[e,a]);return Object(me.jsxs)(gt,{children:[Object(me.jsx)("h1",{children:"Shipping Information"}),Object(me.jsxs)(Xe.a,{onSubmit:function(r){var n;r.preventDefault(),t((n={address:d,postalCode:u,city:v,country:x},function(e){e(jt(n)),localStorage.setItem("shippingAddress",JSON.stringify(n))})),e("/payment")},children:[Object(me.jsxs)(Xe.a.Group,{controlId:"address",children:[Object(me.jsx)(Xe.a.Label,{children:"Address:"}),Object(me.jsx)(Xe.a.Control,{type:"text",placeholder:"Enter destination address",value:d,required:!0,onChange:function(e){return o(e.target.value)}})]}),Object(me.jsxs)(Xe.a.Group,{controlId:"city",children:[Object(me.jsx)(Xe.a.Label,{children:"City:"}),Object(me.jsx)(Xe.a.Control,{type:"text",placeholder:"Enter destination city",value:v,required:!0,onChange:function(e){return y(e.target.value)}})]}),Object(me.jsxs)(Xe.a.Group,{controlId:"postalCode",children:[Object(me.jsx)(Xe.a.Label,{children:"Postal Code:"}),Object(me.jsx)(Xe.a.Control,{type:"text",placeholder:"Enter destination postal code",value:u,required:!0,onChange:function(e){return O(e.target.value)}})]}),Object(me.jsxs)(Xe.a.Group,{controlId:"country",children:[Object(me.jsx)(Xe.a.Label,{children:"Country:"}),Object(me.jsx)(Xe.a.Control,{type:"text",placeholder:"Enter destination country",value:x,required:!0,onChange:function(e){return g(e.target.value)}})]}),Object(me.jsx)(Ze.a,{type:"submit",variant:"primary",children:"Proceed"})]})]})},Ct=function(){var e=Object(b.c)((function(e){return e.cart})).shippingAddress,t=Object(i.B)(),r=Object(b.b)();e.address||t("/shipping");var a=Object(n.useState)("CreditCard"),c=Object(Ke.a)(a,2),s=c[0],d=c[1],o=function(e){d((function(t){return e.target.value}))};return Object(me.jsxs)(gt,{children:[Object(me.jsx)("h1",{children:"Payment"}),Object(me.jsxs)(Xe.a,{onSubmit:function(e){var n;e.preventDefault(),r((n=s,function(e){e(ut(n)),localStorage.setItem("paymentMethod",JSON.stringify(n))})),t("/submitorder")},children:[Object(me.jsxs)(Xe.a.Group,{children:[Object(me.jsx)(Xe.a.Label,{as:"legend",children:"Select Payment Method:"}),Object(me.jsxs)(ye.a,{children:[Object(me.jsx)(Xe.a.Check,{type:"radio",label:"PayPal",name:"paymentMethod",value:"PayPal",checked:"PayPal"===s,onChange:o}),Object(me.jsx)(Xe.a.Check,{type:"radio",label:"Credit Card",name:"paymentMethod",value:"CreditCard",checked:"CreditCard"===s,onChange:o})]})]}),Object(me.jsx)(Ze.a,{type:"submit",variant:"primary",children:"Proceed"})]})]})},wt=function(){var e=Object(b.b)(),t=Object(i.B)(),r=Object(b.c)((function(e){return e.cart})),a=Object(b.c)((function(e){return e.orderCreate})),c=a.order,d=a.success,o=a.error,l=Object(b.c)((function(e){return e.userLogin})).user;r.shippingAddress.address?r.paymentMethod||t("/payment"):t("/shipping");var j=function(e){return(Math.round(100*e)/100).toFixed(2)},u=j(r.itemsInCart.reduce((function(e,t){return e+t.price*t.quantity}),0)),h=j(u>100?0:100),g=j(Number((.13*u).toFixed(2))),m=(Number(u)+Number(h)+Number(g)).toFixed(2);Object(n.useEffect)((function(){l||t("/login"),d&&(t("/order/".concat(c._id)),e(C()),e(je()))}),[d,t]);return Object(me.jsx)(me.Fragment,{children:Object(me.jsxs)(ve.a,{children:[Object(me.jsx)(ye.a,{md:8,children:Object(me.jsxs)(ct.a,{variant:"flush",children:[Object(me.jsxs)(ct.a.Item,{children:[Object(me.jsx)("h2",{children:"Shipping Information"}),Object(me.jsxs)("p",{children:[Object(me.jsx)("strong",{children:"Address:"}),r.shippingAddress.address,", ",r.shippingAddress.city," ",r.shippingAddress.postalCode,","," ",r.shippingAddress.country]})]}),Object(me.jsxs)(ct.a.Item,{children:[Object(me.jsx)("h2",{children:"Payment Method:"}),r.paymentMethod]}),Object(me.jsxs)(ct.a.Item,{children:[Object(me.jsx)("h2",{children:"Items in Order:"}),0===r.itemsInCart.length?Object(me.jsx)(Ne,{children:"There is nothing in your cart"}):Object(me.jsx)(ct.a,{variant:"flush",children:r.itemsInCart.map((function(e,t){return Object(me.jsx)(ct.a.Item,{children:Object(me.jsxs)(ve.a,{children:[Object(me.jsx)(ye.a,{md:1,children:Object(me.jsx)(st.a,{src:e.image,alt:e.name,fluid:!0,rounded:!0})}),Object(me.jsx)(ye.a,{children:Object(me.jsx)(s.Link,{to:"/product/".concat(e.product),children:e.name})}),Object(me.jsxs)(ye.a,{md:4,children:[e.quantity," x $",e.price," = $",(e.quantity*e.price).toFixed(2)]})]})},t)}))})]})]})}),Object(me.jsx)(ye.a,{md:4,children:Object(me.jsx)(Ie.a,{children:Object(me.jsxs)(ct.a,{variant:"flush",children:[Object(me.jsx)(ct.a.Item,{children:Object(me.jsx)("h2",{children:"Order Summary"})}),Object(me.jsx)(ct.a.Item,{children:Object(me.jsxs)(ve.a,{children:[Object(me.jsx)(ye.a,{children:"Items"}),Object(me.jsxs)(ye.a,{children:["$",u]})]})}),Object(me.jsx)(ct.a.Item,{children:Object(me.jsxs)(ve.a,{children:[Object(me.jsx)(ye.a,{children:"Shipping"}),Object(me.jsxs)(ye.a,{children:["$",h]})]})}),Object(me.jsx)(ct.a.Item,{children:Object(me.jsxs)(ve.a,{children:[Object(me.jsx)(ye.a,{children:"Tax"}),Object(me.jsxs)(ye.a,{children:["$",g]})]})}),Object(me.jsx)(ct.a.Item,{children:Object(me.jsxs)(ve.a,{children:[Object(me.jsx)(ye.a,{children:"Total"}),Object(me.jsxs)(ye.a,{children:["$",m]})]})}),Object(me.jsx)(ct.a.Item,{children:o&&Object(me.jsx)(Ne,{variant:"danger",children:o})}),Object(me.jsx)(ct.a.Item,{children:Object(me.jsx)(Ze.a,{type:"button",className:"btn-block",disabled:0===r.itemsInCart,onClick:function(){e(function(e){return function(){var t=Object(p.a)(Object(O.a)().mark((function t(r,n){var a,c,s,i,d,o;return Object(O.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(y()),a=n(),c=a.userLogin.user,s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},t.next=6,x.a.post("/api/orders",e,s);case 6:i=t.sent,d=i.data,r(S(d)),localStorage.removeItem("cartItems"),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(0),"Not authorized"===(o=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message)&&r(ae()),r(I(o));case 17:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,r){return t.apply(this,arguments)}}()}({items:r.itemsInCart,shippingAddress:r.shippingAddress,paymentMethod:r.paymentMethod,itemsPrice:u,shippingPrice:h,taxPrice:g,totalPrice:m}))},children:"Place Order"})})]})})})]})})},kt=function(){var e=Object(i.G)().id,t=Object(i.B)(),r=Object(b.b)(),a=Object(b.c)((function(e){return e.orderDetails})),c=a.order,d=a.loading,o=a.error,l=Object(b.c)((function(e){return e.orderPay})),j=l.loading,u=l.success,h=Object(b.c)((function(e){return e.userLogin})).user;Object(n.useEffect)((function(){h||t("/login"),c&&!u||(r(T()),r(yt(e))),r(yt(e))}),[r,e,t,h,u]);var g;return"pending"===d?Object(me.jsx)(Re,{}):o?Object(me.jsx)(Ne,{variant:"danger",children:o}):Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)("h1",{children:"Your Order:"}),Object(me.jsxs)(ve.a,{children:[Object(me.jsx)(ye.a,{md:8,children:Object(me.jsxs)(ct.a,{variant:"flush",children:[Object(me.jsxs)(ct.a.Item,{children:[Object(me.jsx)("h2",{children:"Shipping"}),Object(me.jsxs)("p",{children:[Object(me.jsx)("strong",{children:"Name: "})," ",c.user.name]}),Object(me.jsxs)("p",{children:[Object(me.jsx)("strong",{children:"Email: "})," ",Object(me.jsx)("a",{href:"mailto:".concat(c.user.email),children:c.user.email})]}),Object(me.jsxs)("p",{children:[Object(me.jsx)("strong",{children:"Address: "}),c.shippingAddress.address,", ",c.shippingAddress.city," ",c.shippingAddress.postalCode,","," ",c.shippingAddress.country]}),c.isPaid&&Object(me.jsx)(Ne,{variant:"info",children:"This order will be delivered in 5 business days"})]}),Object(me.jsxs)(ct.a.Item,{children:[Object(me.jsx)("h2",{children:"Payment Method"}),Object(me.jsxs)("p",{children:[Object(me.jsx)("strong",{children:"Method: "}),c.paymentMethod]}),c.isPaid?Object(me.jsxs)(Ne,{variant:"success",children:["Order Paid ",c.isPaid]}):Object(me.jsx)(Ne,{variant:"danger",children:"Not Paid"})]}),Object(me.jsxs)(ct.a.Item,{children:[Object(me.jsx)("h2",{children:"Items in Order:"}),0===c.items.length?Object(me.jsx)(Ne,{children:"Order is empty"}):Object(me.jsx)(ct.a,{variant:"flush",children:c.items.map((function(e,t){return Object(me.jsx)(ct.a.Item,{children:Object(me.jsxs)(ve.a,{children:[Object(me.jsx)(ye.a,{md:1,children:Object(me.jsx)(st.a,{src:e.image,alt:e.name,fluid:!0,rounded:!0})}),Object(me.jsx)(ye.a,{children:Object(me.jsx)(s.Link,{to:"/product/".concat(e.product),children:e.name})}),Object(me.jsxs)(ye.a,{md:4,children:[e.quantity," x $",e.price," = $",(e.quantity*e.price).toFixed(2)]})]})},t)}))})]})]})}),Object(me.jsx)(ye.a,{md:4,children:Object(me.jsx)(Ie.a,{children:Object(me.jsxs)(ct.a,{variant:"flush",children:[Object(me.jsx)(ct.a.Item,{children:Object(me.jsx)("h2",{children:"Order Summary"})}),Object(me.jsx)(ct.a.Item,{children:Object(me.jsxs)(ve.a,{children:[Object(me.jsx)(ye.a,{children:"Items:"}),Object(me.jsxs)(ye.a,{children:["$",(g=null===c||void 0===c?void 0:c.items.reduce((function(e,t){return e+t.price*t.quantity}),0),(Math.round(100*g)/100).toFixed(2))]})]})}),Object(me.jsx)(ct.a.Item,{children:Object(me.jsxs)(ve.a,{children:[Object(me.jsx)(ye.a,{children:"Shipping"}),Object(me.jsxs)(ye.a,{children:["$",c.shippingPrice]})]})}),Object(me.jsx)(ct.a.Item,{children:Object(me.jsxs)(ve.a,{children:[Object(me.jsx)(ye.a,{children:"Tax"}),Object(me.jsxs)(ye.a,{children:["$",c.taxPrice]})]})}),Object(me.jsx)(ct.a.Item,{children:Object(me.jsxs)(ve.a,{children:[Object(me.jsx)(ye.a,{children:"Total"}),Object(me.jsxs)(ye.a,{children:["$",c.totalPrice]})]})}),!c.isPaid&&Object(me.jsx)(ct.a.Item,{children:"pending"===j?Object(me.jsx)(Re,{}):Object(me.jsx)(Ze.a,{onClick:function(){var t;r((t=e,function(){var e=Object(p.a)(Object(O.a)().mark((function e(r,n){var a,c,s,i,d,o;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(U()),a=n(),c=a.userLogin.user,s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},e.next=6,x.a.put("/api/orders/".concat(t,"/pay"),{result:"success"},s);case 6:i=e.sent,d=i.data,r(q(d)),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),"Not authorized"===(o=e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message)&&r(ae()),r(E(o));case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r){return e.apply(this,arguments)}}())),r(bt())},children:"Pay For This Order"})})]})})})]})]})},Lt=function(){return Object(me.jsxs)(s.BrowserRouter,{children:[Object(me.jsx)(fe,{}),Object(me.jsx)("main",{className:"py-3",children:Object(me.jsx)(d.a,{children:Object(me.jsxs)(i.h,{children:[Object(me.jsx)(i.e,{path:"/search/:query/page/:pageNum",element:Object(me.jsx)(at,{})}),Object(me.jsx)(i.e,{path:"/search/:query",element:Object(me.jsx)(at,{})}),Object(me.jsx)(i.e,{path:"/page/:pageNum",element:Object(me.jsx)(at,{})}),Object(me.jsx)(i.e,{path:"/order/:id",element:Object(me.jsx)(kt,{})}),Object(me.jsx)(i.e,{path:"/product/:id",element:Object(me.jsx)(xt,{})}),Object(me.jsx)(i.e,{path:"/cart/:id?",element:Object(me.jsx)(ht,{})}),Object(me.jsx)(i.e,{path:"/shipping",element:Object(me.jsx)(It,{})}),Object(me.jsx)(i.e,{path:"/payment",element:Object(me.jsx)(Ct,{})}),Object(me.jsx)(i.e,{path:"/submitorder",element:Object(me.jsx)(wt,{})}),Object(me.jsx)(i.e,{path:"/login",element:Object(me.jsx)(mt,{})}),Object(me.jsx)(i.e,{path:"/signup",element:Object(me.jsx)(ft,{})}),Object(me.jsx)(i.e,{path:"/profile",element:Object(me.jsx)(St,{})}),Object(me.jsx)(i.e,{path:"/",element:Object(me.jsx)(at,{})})]})})}),Object(me.jsx)(Se,{})]})},Pt={cart:{itemsInCart:localStorage.getItem("itemsInCart")?JSON.parse(localStorage.getItem("itemsInCart")):[],shippingAddress:localStorage.getItem("shippingAddress")?JSON.parse(localStorage.getItem("shippingAddress")):null},userLogin:{user:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null}},Nt=Object(g.a)({reducer:{productList:Ee,productDetails:We,addReview:Je,cart:Ot,orderCreate:f,orderDetails:k,orderPay:F,orderListUser:B,userLogin:Z,userSignup:H,userDetails:se,userUpdate:be},preloadedState:Pt});c.a.render(Object(me.jsx)(b.a,{store:Nt,children:Object(me.jsx)(Lt,{})}),document.getElementById("root"))},90:function(e,t,r){},91:function(e,t,r){}},[[120,1,2]]]);
//# sourceMappingURL=main.394deb8f.chunk.js.map